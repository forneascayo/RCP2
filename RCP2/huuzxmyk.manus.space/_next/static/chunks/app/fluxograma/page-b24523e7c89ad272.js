(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[841],{1372:(e,t,a)=>{Promise.resolve().then(a.bind(a,9536))},9536:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var s=a(2860),n=a(3200),o=a(3978);function r(){let{dadosAnalisados:e}=(0,o.U)(),[t,a]=(0,n.useState)(!1),[r,l]=(0,n.useState)(null),[c,i]=(0,n.useState)(null),[d,x]=(0,n.useState)({antenato_id:"",requerentes:[],separar_nucleos:!0,destacar_genero:!0,marcar_mulheres_1982:!0,marcar_linhas_maternas:!0,jsonInput:""}),h=t=>{if(!e||!e.resultado||!e.resultado.pessoas)return"Nome desconhecido";let a=e.resultado.pessoas[t];return a&&a.nome?a.nome:"Nome desconhecido"},m=t=>{if(!e||!e.resultado||!e.resultado.pessoas)return"";let a=e.resultado.pessoas[t];return a&&a.data_nascimento?a.data_nascimento:""};(0,n.useEffect)(()=>{e&&x(t=>({...t,antenato_id:e.antenato_id||"",requerentes:e.requerentes||[],jsonInput:JSON.stringify({certidoes:e.certidoes},null,2)}))},[e]);let u=e=>{let{name:t,checked:a}=e.target;x(e=>({...e,[t]:a}))},p=async()=>{try{if(!d.antenato_id){alert("Por favor, informe o ID do antenato italiano.");return}if(0===d.requerentes.length){alert("Por favor, selecione pelo menos um requerente.");return}if(!d.jsonInput){alert("Por favor, forne\xe7a os dados das certid\xf5es em formato JSON.");return}a(!0),l(null),JSON.parse(d.jsonInput),setTimeout(()=>{let e='\n          <svg width="900" height="800" xmlns="http://www.w3.org/2000/svg">\n            <style>\n              .pessoa { fill: #f0f0f0; stroke: #333; stroke-width: 2; }\n              .pessoa-requerente { fill: #d1e7dd; stroke: #0f5132; stroke-width: 2; }\n              .pessoa-antenato { fill: #cfe2ff; stroke: #084298; stroke-width: 2; }\n              .pessoa-homem { fill: #e2e3e5; }\n              .pessoa-mulher { fill: #f8d7da; }\n              .linha { stroke: #333; stroke-width: 1.5; }\n              .linha-casamento { stroke: #333; stroke-width: 1.5; stroke-dasharray: 5,3; }\n              .texto { font-family: Arial; font-size: 12px; }\n              .texto-pequeno { font-family: Arial; font-size: 10px; }\n              .titulo { font-family: Arial; font-size: 16px; font-weight: bold; }\n            </style>\n            \n            <text x="450" y="30" text-anchor="middle" class="titulo">Fluxograma Geneal\xf3gico</text>\n            \n            \x3c!-- Antenato e C\xf4njuge (Primeira Gera\xe7\xe3o) --\x3e\n            <rect x="300" y="50" width="120" height="70" rx="5" class="pessoa pessoa-antenato pessoa-homem" />\n            <text x="360" y="75" text-anchor="middle" class="texto">'.concat(h(d.antenato_id),'</text>\n            <text x="360" y="95" text-anchor="middle" class="texto-pequeno">').concat(m(d.antenato_id),'</text>\n            \n            \x3c!-- Linha de casamento --\x3e\n            <line x1="420" y1="85" x2="480" y2="85" class="linha-casamento" />\n            \n            \x3c!-- C\xf4njuge do Antenato --\x3e\n            <rect x="480" y="50" width="120" height="70" rx="5" class="pessoa pessoa-mulher" />\n            <text x="540" y="75" text-anchor="middle" class="texto">').concat(h("pessoa2"),'</text>\n            <text x="540" y="95" text-anchor="middle" class="texto-pequeno">').concat(m("pessoa2"),'</text>\n            \n            \x3c!-- Linha vertical para descendentes --\x3e\n            <line x1="450" y1="120" x2="450" y2="150" class="linha" />\n            \n            \x3c!-- Filho e C\xf4njuge (Segunda Gera\xe7\xe3o) --\x3e\n            <rect x="300" y="150" width="120" height="70" rx="5" class="pessoa pessoa-homem" />\n            <text x="360" y="175" text-anchor="middle" class="texto">').concat(h("pessoa3"),'</text>\n            <text x="360" y="195" text-anchor="middle" class="texto-pequeno">').concat(m("pessoa3"),'</text>\n            \n            \x3c!-- Linha de casamento --\x3e\n            <line x1="420" y1="185" x2="480" y2="185" class="linha-casamento" />\n            \n            \x3c!-- C\xf4njuge do Filho --\x3e\n            <rect x="480" y="150" width="120" height="70" rx="5" class="pessoa pessoa-mulher" />\n            <text x="540" y="175" text-anchor="middle" class="texto">').concat(h("pessoa4"),'</text>\n            <text x="540" y="195" text-anchor="middle" class="texto-pequeno">').concat(m("pessoa4"),'</text>\n            \n            \x3c!-- Linha vertical para pr\xf3xima gera\xe7\xe3o --\x3e\n            <line x1="450" y1="220" x2="450" y2="250" class="linha" />\n            \n            \x3c!-- Neta e C\xf4njuge (Terceira Gera\xe7\xe3o) --\x3e\n            <rect x="300" y="250" width="120" height="70" rx="5" class="pessoa pessoa-mulher" />\n            <text x="360" y="275" text-anchor="middle" class="texto">').concat(h("pessoa5"),'</text>\n            <text x="360" y="295" text-anchor="middle" class="texto-pequeno">').concat(m("pessoa5"),'</text>\n            \n            \x3c!-- Linha de casamento --\x3e\n            <line x1="420" y1="285" x2="480" y2="285" class="linha-casamento" />\n            \n            \x3c!-- C\xf4njuge da Neta --\x3e\n            <rect x="480" y="250" width="120" height="70" rx="5" class="pessoa pessoa-homem" />\n            <text x="540" y="275" text-anchor="middle" class="texto">').concat(h("pessoa6"),'</text>\n            <text x="540" y="295" text-anchor="middle" class="texto-pequeno">').concat(m("pessoa6"),'</text>\n            \n            \x3c!-- Linha vertical para pr\xf3xima gera\xe7\xe3o --\x3e\n            <line x1="450" y1="320" x2="450" y2="350" class="linha" />\n            \n            \x3c!-- Bisneta e C\xf4njuge (Quarta Gera\xe7\xe3o) --\x3e\n            <rect x="300" y="350" width="120" height="70" rx="5" class="pessoa pessoa-mulher" />\n            <text x="360" y="375" text-anchor="middle" class="texto">').concat(h("pessoa7"),'</text>\n            <text x="360" y="395" text-anchor="middle" class="texto-pequeno">').concat(m("pessoa7"),'</text>\n            \n            \x3c!-- Linha de casamento --\x3e\n            <line x1="420" y1="385" x2="480" y2="385" class="linha-casamento" />\n            \n            \x3c!-- C\xf4njuge da Bisneta --\x3e\n            <rect x="480" y="350" width="120" height="70" rx="5" class="pessoa pessoa-homem" />\n            <text x="540" y="375" text-anchor="middle" class="texto">').concat(h("pessoa8"),'</text>\n            <text x="540" y="395" text-anchor="middle" class="texto-pequeno">').concat(m("pessoa8"),'</text>\n            \n            \x3c!-- Linha vertical para pr\xf3xima gera\xe7\xe3o --\x3e\n            <line x1="450" y1="420" x2="450" y2="450" class="linha" />\n            \n            \x3c!-- Trineto (Quinta Gera\xe7\xe3o - Requerente) --\x3e\n            <rect x="390" y="450" width="120" height="70" rx="5" class="pessoa pessoa-requerente pessoa-homem" />\n            <text x="450" y="475" text-anchor="middle" class="texto">').concat(h("pessoa9"),'</text>\n            <text x="450" y="495" text-anchor="middle" class="texto-pequeno">').concat(m("pessoa9"),'</text>\n            \n            \x3c!-- Legenda --\x3e\n            <rect x="700" y="50" width="150" height="150" rx="5" fill="white" stroke="#333" />\n            <text x="775" y="70" text-anchor="middle" class="texto" font-weight="bold">Legenda</text>\n            \n            <rect x="710" y="80" width="20" height="15" class="pessoa-antenato" />\n            <text x="735" y="92" class="texto" text-anchor="start">Antenato Italiano</text>\n            \n            <rect x="710" y="105" width="20" height="15" class="pessoa-requerente" />\n            <text x="735" y="117" class="texto" text-anchor="start">Requerente</text>\n            \n            <rect x="710" y="130" width="20" height="15" fill="#e2e3e5" stroke="#333" />\n            <text x="735" y="142" class="texto" text-anchor="start">Homem</text>\n            \n            <rect x="710" y="155" width="20" height="15" fill="#f8d7da" stroke="#333" />\n            <text x="735" y="167" class="texto" text-anchor="start">Mulher</text>\n            \n            <line x1="710" y1="185" x2="730" y2="185" class="linha-casamento" />\n            <text x="735" y="190" class="texto" text-anchor="start">Casamento</text>\n          </svg>\n        ');i(e),a(!1)},1500)}catch(e){a(!1),l("Erro ao processar dados: "+(e instanceof Error?e.message:"Formato inv\xe1lido"))}};return(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-[#0f2b5b] mb-6",children:"Fluxograma Geneal\xf3gico"}),(0,s.jsxs)("div",{className:"card mb-8",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-[#0f2b5b] mb-4",children:"Configura\xe7\xe3o do Fluxograma"}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:"Configure os par\xe2metros para gera\xe7\xe3o do fluxograma geneal\xf3gico com base nos dados das certid\xf5es."}),(0,s.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"form-label",children:"Op\xe7\xf5es de Visualiza\xe7\xe3o"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{id:"separar_nucleos",name:"separar_nucleos",type:"checkbox",className:"h-4 w-4 text-[#0f2b5b] focus:ring-[#3b82f6] border-gray-300 rounded",checked:d.separar_nucleos,onChange:u}),(0,s.jsx)("label",{htmlFor:"separar_nucleos",className:"ml-2 block text-sm text-gray-700",children:"Separar por n\xfacleo familiar"})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{id:"destacar_genero",name:"destacar_genero",type:"checkbox",className:"h-4 w-4 text-[#0f2b5b] focus:ring-[#3b82f6] border-gray-300 rounded",checked:d.destacar_genero,onChange:u}),(0,s.jsx)("label",{htmlFor:"destacar_genero",className:"ml-2 block text-sm text-gray-700",children:"Destacar g\xeanero (homens e mulheres)"})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{id:"marcar_mulheres_1982",name:"marcar_mulheres_1982",type:"checkbox",className:"h-4 w-4 text-[#0f2b5b] focus:ring-[#3b82f6] border-gray-300 rounded",checked:d.marcar_mulheres_1982,onChange:u}),(0,s.jsx)("label",{htmlFor:"marcar_mulheres_1982",className:"ml-2 block text-sm text-gray-700",children:"Marcar mulheres casadas antes de 1982"})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{id:"marcar_linhas_maternas",name:"marcar_linhas_maternas",type:"checkbox",className:"h-4 w-4 text-[#0f2b5b] focus:ring-[#3b82f6] border-gray-300 rounded",checked:d.marcar_linhas_maternas,onChange:u}),(0,s.jsx)("label",{htmlFor:"marcar_linhas_maternas",className:"ml-2 block text-sm text-gray-700",children:"Identificar linhas maternas (mulher com filho nascido antes de 1948)"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-[#0f2b5b] mb-2",children:"Dados Carregados"}),e?(0,s.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg mb-4",children:[(0,s.jsxs)("p",{className:"text-green-700",children:[(0,s.jsx)("strong",{children:"Antenato identificado:"})," ",h(d.antenato_id)]}),(0,s.jsxs)("p",{className:"text-green-700",children:[(0,s.jsx)("strong",{children:"Requerentes selecionados:"})," ",d.requerentes.map(e=>h(e)).join(", ")]}),(0,s.jsxs)("p",{className:"text-green-700",children:[(0,s.jsx)("strong",{children:"Total de pessoas:"})," ",e.certidoes?Object.keys(e.certidoes).length:0]})]}):(0,s.jsx)("div",{className:"bg-yellow-50 p-4 rounded-lg mb-4",children:(0,s.jsx)("p",{className:"text-yellow-700",children:"Nenhum dado carregado. Por favor, realize a an\xe1lise de certid\xf5es primeiro ou insira os dados manualmente abaixo."})})]}),!e&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"jsonInput",className:"form-label",children:"Dados das Certid\xf5es (JSON)"}),(0,s.jsx)("textarea",{id:"jsonInput",name:"jsonInput",className:"form-input h-40 font-mono text-sm",placeholder:'{"certidoes": {"pessoa1": {"nascimento": {"nome": "Nome Completo", "data_nascimento": "DD/MM/AAAA", "local_nascimento": "Cidade, Prov\xedncia (Pa\xeds)", "pai": "Nome do Pai", "mae": "Nome da M\xe3e", "sexo": "M"}, "casamento": {"conjuge": "pessoa2", "data_casamento": "DD/MM/AAAA", "local_casamento": "Cidade, Prov\xedncia (Pa\xeds)"}, "obito": {"data_obito": "DD/MM/AAAA", "local_obito": "Cidade, Prov\xedncia (Pa\xeds)"}}}}',value:d.jsonInput,onChange:e=>x(t=>({...t,jsonInput:e.target.value}))})]})]}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("button",{className:"btn-primary",onClick:p,disabled:t,children:t?"Gerando...":"Gerar Fluxograma"})})]}),(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-[#0f2b5b] mb-4",children:"Fluxograma Geneal\xf3gico"}),r&&(0,s.jsxs)("div",{className:"bg-red-50 p-4 rounded-lg text-red-700 mb-4",children:[(0,s.jsx)("p",{className:"font-medium",children:"Erro:"}),(0,s.jsx)("p",{children:r})]}),!c&&!r&&(0,s.jsx)("div",{className:"bg-gray-50 p-8 rounded-lg text-center text-gray-500 min-h-[400px] flex items-center justify-center",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),(0,s.jsx)("p",{className:"mt-2",children:"Nenhum fluxograma gerado ainda."})]})}),c&&(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"bg-white p-4 rounded-lg border border-gray-200 overflow-auto",style:{maxHeight:"600px"},dangerouslySetInnerHTML:{__html:c}}),(0,s.jsxs)("div",{className:"mt-4 flex justify-end space-x-4",children:[(0,s.jsx)("button",{className:"bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded",onClick:()=>{let e=new Blob([c],{type:"image/svg+xml"}),t=URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download="fluxograma_genealogico.svg",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(t)},children:"Baixar SVG"}),(0,s.jsx)("button",{className:"btn-primary",onClick:()=>{window.location.href="/peticao"},children:"Gerar Peti\xe7\xe3o"})]})]})]})]})}},3978:(e,t,a)=>{"use strict";a.d(t,{AppContextProvider:()=>l,U:()=>r});var s=a(2860),n=a(3200);let o=(0,n.createContext)({dadosAnalisados:null,setDadosAnalisados:()=>{},antenato_id:"",setAntenato_id:()=>{},requerentes:[],setRequerentes:()=>{}}),r=()=>(0,n.useContext)(o);function l(e){let{children:t}=e,[a,r]=(0,n.useState)(null),[l,c]=(0,n.useState)(""),[i,d]=(0,n.useState)([]);return(0,s.jsx)(o.Provider,{value:{dadosAnalisados:a,setDadosAnalisados:r,antenato_id:l,setAntenato_id:c,requerentes:i,setRequerentes:d},children:t})}}},e=>{var t=t=>e(e.s=t);e.O(0,[685,411,358],()=>t(1372)),_N_E=e.O()}]);