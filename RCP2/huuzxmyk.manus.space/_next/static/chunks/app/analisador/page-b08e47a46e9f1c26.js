(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[349],{7320:(e,a,s)=>{Promise.resolve().then(s.bind(s,5061))},5061:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>i});var t=s(2860),o=s(3200),n=s(261),l=s(3978);function i(){let e=(0,n.useRouter)(),{setDadosAnalisados:a}=(0,l.U)(),[s,i]=(0,o.useState)(!1),[r,c]=(0,o.useState)(null),[d,m]=(0,o.useState)(""),[u,x]=(0,o.useState)(null),[p,h]=(0,o.useState)([]),[b,f]=(0,o.useState)(!1),[j,g]=(0,o.useState)([]),v=(0,o.useRef)(null),N=(0,o.useRef)(null),_=(0,o.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),f(!0)},[]),y=(0,o.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),f(!1)},[]),C=(0,o.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),b||f(!0)},[b]),A=(0,o.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),f(!1),e.dataTransfer.files&&e.dataTransfer.files.length>0&&(h(Array.from(e.dataTransfer.files)),e.dataTransfer.clearData())},[]),D=(e,a)=>a[e]&&a[e].nome?a[e].nome:e,P=async()=>{try{i(!0),c(null);let e=JSON.parse(d);setTimeout(()=>{let s={pessoas:{},inconsistencias:[],documentos_faltantes:[],linhas_maternas:[]};e.certidoes&&Object.entries(e.certidoes).forEach(e=>{let[a,t]=e,o={};t.nascimento&&(o.nome=t.nascimento.nome,o.data_nascimento=t.nascimento.data_nascimento,o.local_nascimento=t.nascimento.local_nascimento,o.pai=t.nascimento.pai,o.mae=t.nascimento.mae,o.sexo=t.nascimento.sexo),t.casamento&&(o.conjuge=t.casamento.conjuge,o.data_casamento=t.casamento.data_casamento,o.local_casamento=t.casamento.local_casamento),t.obito&&(o.data_obito=t.obito.data_obito,o.local_obito=t.obito.local_obito),s.pessoas[a]=o}),Object.keys(s.pessoas).length>0&&(Object.entries(s.pessoas).forEach(e=>{let[a,t]=e;if(t.pai&&s.pessoas[t.pai]){let e=s.pessoas[t.pai];e.nome&&!e.nome.includes(t.pai.replace("pessoa",""))&&s.inconsistencias.push({pessoa:a,pessoa_nome:t.nome,tipo:"Inconsist\xeancia no nome do pai",valor1:t.pai,valor1_nome:e.nome,valor2:e.nome,documento:"Certid\xe3o de Nascimento"})}}),Object.entries(s.pessoas).forEach(e=>{let[a,t]=e;t.data_nascimento||s.documentos_faltantes.push({pessoa:a,pessoa_nome:t.nome||"Nome desconhecido",documento:"Certid\xe3o de Nascimento"}),t.conjuge&&!t.data_casamento&&s.documentos_faltantes.push({pessoa:a,pessoa_nome:t.nome||"Nome desconhecido",documento:"Certid\xe3o de Casamento"})}),Object.entries(s.pessoas).forEach(e=>{let[a,t]=e;"F"===t.sexo&&t.local_nascimento&&t.local_nascimento.includes("It\xe1lia")&&s.linhas_maternas.push({pessoa:a,pessoa_nome:t.nome||"Nome desconhecido"})})),x(s),a({certidoes:e.certidoes,resultado:s}),i(!1)},1e3)}catch(e){i(!1),c("Erro ao processar JSON: "+(e instanceof Error?e.message:"Formato inv\xe1lido"))}},k=async()=>{if(0===p.length){alert("Por favor, selecione pelo menos um arquivo para an\xe1lise.");return}alert("".concat(p.length," arquivo(s) selecionado(s) para processamento. Em uma implementa\xe7\xe3o completa, estes seriam enviados ao servidor para an\xe1lise."))},w=e=>{h(p.filter((a,s)=>s!==e))},S=e=>{g(a=>a.includes(e)?a.filter(a=>a!==e):[...a,e])};return(0,t.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-[#0f2b5b] mb-6",children:"Analisador de Certid\xf5es"}),(0,t.jsxs)("div",{className:"card mb-8",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-[#0f2b5b] mb-4",children:"Upload de Documentos"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"Fa\xe7a o upload das certid\xf5es de nascimento, casamento e \xf3bito para an\xe1lise autom\xe1tica. O sistema identificar\xe1 inconsist\xeancias e documentos faltantes."}),(0,t.jsxs)("div",{ref:N,className:"border-2 border-dashed ".concat(b?"border-[#0f2b5b] bg-blue-50":"border-gray-300"," rounded-lg p-6 text-center mb-4 transition-colors duration-200"),onDragEnter:_,onDragOver:C,onDragLeave:y,onDrop:A,children:[(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:(0,t.jsx)("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:b?"Solte os arquivos aqui":"Arraste e solte arquivos aqui ou"})]}),(0,t.jsx)("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",multiple:!0,ref:v,onChange:e=>{e.target.files&&e.target.files.length>0&&h(Array.from(e.target.files))}}),(0,t.jsx)("label",{htmlFor:"file-upload",className:"btn-primary cursor-pointer",children:"Selecionar Arquivos"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"PDF, JPG, PNG at\xe9 10MB cada"}),p.length>0&&(0,t.jsxs)("div",{className:"mt-4 text-left",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Arquivos selecionados:"}),(0,t.jsx)("ul",{className:"mt-1 text-sm text-gray-500",children:p.map((e,a)=>(0,t.jsxs)("li",{className:"flex justify-between items-center py-1",children:[(0,t.jsxs)("span",{children:[e.name," (",Math.round(e.size/1024)," KB)"]}),(0,t.jsx)("button",{onClick:()=>w(a),className:"text-red-500 hover:text-red-700",type:"button",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]},a))})]})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-[#0f2b5b] mb-2",children:"Formato dos Dados"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Alternativamente, voc\xea pode fornecer os dados em formato JSON:"}),(0,t.jsx)("textarea",{className:"form-input h-40 font-mono text-sm",placeholder:'{"certidoes": {"pessoa1": {"nascimento": {"nome": "Nome Completo", "data_nascimento": "DD/MM/AAAA", "local_nascimento": "Cidade, Prov\xedncia (Pa\xeds)", "pai": "Nome do Pai", "mae": "Nome da M\xe3e", "sexo": "M"}, "casamento": {"conjuge": "pessoa2", "data_casamento": "DD/MM/AAAA", "local_casamento": "Cidade, Prov\xedncia (Pa\xeds)"}, "obito": {"data_obito": "DD/MM/AAAA", "local_obito": "Cidade, Prov\xedncia (Pa\xeds)"}}}}',value:d,onChange:e=>m(e.target.value)})]}),(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsx)("button",{className:"btn-primary",onClick:()=>{d?P():p.length>0?k():alert("Por favor, forne\xe7a dados para an\xe1lise (upload de arquivos ou JSON).")},disabled:s,children:s?"Analisando...":"Analisar Documentos"})})]}),(0,t.jsxs)("div",{className:"card",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-[#0f2b5b] mb-4",children:"Resultados da An\xe1lise"}),r&&(0,t.jsxs)("div",{className:"bg-red-50 p-4 rounded-lg text-red-700 mb-4",children:[(0,t.jsx)("p",{className:"font-medium",children:"Erro:"}),(0,t.jsx)("p",{children:r})]}),!u&&!r&&(0,t.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg text-center text-gray-500",children:"Nenhuma an\xe1lise realizada ainda."}),u&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-[#0f2b5b] mb-2",children:"Pessoas Identificadas"}),(0,t.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg",children:(0,t.jsx)("ul",{className:"space-y-2",children:Object.entries(u.pessoas||{}).map(e=>{var a;let[s,o]=e;return(0,t.jsxs)("li",{className:"border-b border-gray-200 pb-2",children:[(0,t.jsx)("strong",{children:o.nome||"Nome desconhecido"}),(0,t.jsxs)("ul",{className:"ml-4 text-sm text-gray-600",children:[o.data_nascimento&&(0,t.jsxs)("li",{children:["Nascimento: ",o.data_nascimento]}),o.local_nascimento&&(0,t.jsxs)("li",{children:["Local: ",o.local_nascimento]}),o.conjuge&&(0,t.jsxs)("li",{children:["C\xf4njuge: ",(null===(a=u.pessoas[o.conjuge])||void 0===a?void 0:a.nome)||"Nome desconhecido"]}),o.data_casamento&&(0,t.jsxs)("li",{children:["Casamento: ",o.data_casamento]}),o.data_obito&&(0,t.jsxs)("li",{children:["\xd3bito: ",o.data_obito]})]})]},s)})})})]}),u.inconsistencias&&u.inconsistencias.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-[#0f2b5b] mb-2",children:"Inconsist\xeancias Encontradas"}),(0,t.jsx)("div",{className:"bg-yellow-50 p-4 rounded-lg",children:(0,t.jsx)("ul",{className:"space-y-2",children:u.inconsistencias.map((e,a)=>{var s;return(0,t.jsxs)("li",{className:"text-yellow-800",children:[(0,t.jsxs)("strong",{children:[e.pessoa_nome||(null===(s=u.pessoas[e.pessoa])||void 0===s?void 0:s.nome)||"Nome desconhecido",":"]})," ",e.tipo," - '",e.valor1_nome||D(e.valor1,u.pessoas),"' vs '",e.valor2,"' em ",e.documento]},a)})})})]}),u.documentos_faltantes&&u.documentos_faltantes.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-[#0f2b5b] mb-2",children:"Documentos Faltantes"}),(0,t.jsx)("div",{className:"bg-red-50 p-4 rounded-lg",children:(0,t.jsx)("ul",{className:"space-y-2",children:u.documentos_faltantes.map((e,a)=>{var s;return(0,t.jsxs)("li",{className:"text-red-700",children:[(0,t.jsxs)("strong",{children:[e.pessoa_nome||(null===(s=u.pessoas[e.pessoa])||void 0===s?void 0:s.nome)||"Nome desconhecido",":"]})," ",e.documento]},a)})})})]}),u.linhas_maternas&&u.linhas_maternas.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-[#0f2b5b] mb-2",children:"Linhas Maternas (pr\xe9-1948)"}),(0,t.jsx)("div",{className:"bg-purple-50 p-4 rounded-lg",children:(0,t.jsx)("ul",{className:"space-y-2",children:u.linhas_maternas.map((e,a)=>{var s;return(0,t.jsx)("li",{className:"text-purple-700",children:(0,t.jsx)("strong",{children:e.pessoa_nome||(null===(s=u.pessoas[e.pessoa])||void 0===s?void 0:s.nome)||"Nome desconhecido"})},a)})})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-[#0f2b5b] mb-2",children:"Selecione os Requerentes"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Selecione as pessoas que s\xe3o requerentes no processo de cidadania italiana:"}),(0,t.jsx)("div",{className:"bg-blue-50 p-4 rounded-lg",children:(0,t.jsx)("ul",{className:"space-y-2",children:Object.entries(u.pessoas||{}).map(e=>{let[a,s]=e;return(0,t.jsxs)("li",{className:"flex items-center",children:[(0,t.jsx)("input",{type:"checkbox",id:"requerente-".concat(a),checked:j.includes(a),onChange:()=>S(a),className:"h-4 w-4 text-[#0f2b5b] focus:ring-[#3b82f6] border-gray-300 rounded"}),(0,t.jsx)("label",{htmlFor:"requerente-".concat(a),className:"ml-2 block text-sm text-gray-700",children:s.nome||"Nome desconhecido"})]},a)})})})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-4 mt-6",children:[(0,t.jsx)("button",{className:"bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded",onClick:()=>{alert("Em uma implementa\xe7\xe3o completa, esta funcionalidade geraria um relat\xf3rio para download.")},children:"Baixar Relat\xf3rio"}),(0,t.jsx)("button",{className:"btn-primary",onClick:()=>{if(0===j.length){alert("Por favor, selecione pelo menos um requerente antes de gerar o fluxograma.");return}let s="",t=new Date(3e3,0,1);Object.entries(u.pessoas).forEach(e=>{let[a,o]=e;if(o.local_nascimento&&o.local_nascimento.includes("It\xe1lia")&&o.data_nascimento){let e=new Date(o.data_nascimento.split("/").reverse().join("-"));e<t&&(s=a,t=e)}}),s||Object.entries(u.pessoas).forEach(e=>{let[a,o]=e;if(o.data_nascimento){let e=new Date(o.data_nascimento.split("/").reverse().join("-"));e<t&&(s=a,t=e)}}),a({certidoes:JSON.parse(d).certidoes,resultado:u,antenato_id:s,requerentes:j}),e.push("/fluxograma")},children:"Gerar Fluxograma"})]})]})]})]})}},3978:(e,a,s)=>{"use strict";s.d(a,{AppContextProvider:()=>i,U:()=>l});var t=s(2860),o=s(3200);let n=(0,o.createContext)({dadosAnalisados:null,setDadosAnalisados:()=>{},antenato_id:"",setAntenato_id:()=>{},requerentes:[],setRequerentes:()=>{}}),l=()=>(0,o.useContext)(n);function i(e){let{children:a}=e,[s,l]=(0,o.useState)(null),[i,r]=(0,o.useState)(""),[c,d]=(0,o.useState)([]);return(0,t.jsx)(n.Provider,{value:{dadosAnalisados:s,setDadosAnalisados:l,antenato_id:i,setAntenato_id:r,requerentes:c,setRequerentes:d},children:a})}}},e=>{var a=a=>e(e.s=a);e.O(0,[685,411,358],()=>a(7320)),_N_E=e.O()}]);